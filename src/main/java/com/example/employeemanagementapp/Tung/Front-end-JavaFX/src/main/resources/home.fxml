<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.crm.controller.HomeController"
            stylesheets="@styles.css" prefWidth="1100" prefHeight="800">

    <!-- Top header -->
    <top>
        <VBox spacing="6" padding="12">
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Label text="Dashboard" styleClass="title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="dateLabel" styleClass="muted"/>
            </HBox>
            <Separator/>
        </VBox>
    </top>

    <center>
        <VBox spacing="12" padding="12">

            <!-- Stats cards -->
            <HBox spacing="12">
                <HBox spacing="8" styleClass="card" prefWidth="220" alignment="CENTER_LEFT" padding="10">
                    <VBox>
                        <Label text="Total Employees" styleClass="card-title"/>
                        <Label fx:id="totalEmployeesLabel" styleClass="card-value"/>
                        <Label text="Active accounts" styleClass="muted small"/>
                    </VBox>
                </HBox>

                <HBox spacing="8" styleClass="card" prefWidth="220" alignment="CENTER_LEFT" padding="10">
                    <VBox>
                        <Label text="Checked In" styleClass="card-title"/>
                        <Label fx:id="checkedInLabel" styleClass="card-value"/>
                        <Label text="Currently present" styleClass="muted small"/>
                    </VBox>
                </HBox>

                <HBox spacing="8" styleClass="card" prefWidth="220" alignment="CENTER_LEFT" padding="10">
                    <VBox>
                        <Label text="Checked Out" styleClass="card-title"/>
                        <Label fx:id="checkedOutLabel" styleClass="card-value"/>
                        <Label text="Left for today" styleClass="muted small"/>
                    </VBox>
                </HBox>

                <HBox spacing="8" styleClass="card" prefWidth="220" alignment="CENTER_LEFT" padding="10">
                    <VBox>
                        <Label text="Attendance Rate" styleClass="card-title"/>
                        <Label fx:id="attendanceRateLabel" styleClass="card-value"/>
                        <Label text="Today's attendance" styleClass="muted small"/>
                    </VBox>
                </HBox>
            </HBox>

            <!-- Main content: left (table) and right (recent activity) -->
            <HBox spacing="12">
                <!-- Left big card -->
                <VBox spacing="10" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
                    <TitledPane text="Employee Status" expanded="true">
                        <VBox spacing="8" padding="8">

                            <HBox spacing="8" alignment="CENTER_LEFT">
                                <HBox spacing="6" styleClass="clock-box" alignment="CENTER_LEFT" padding="6">
                                    <Label text="Current Time" styleClass="muted small"/>
                                    <Label fx:id="clockLabel" styleClass="clock-value"/>
                                </HBox>

                                <Region HBox.hgrow="ALWAYS"/>
                                <DatePicker fx:id="datePicker"/>
                                <ChoiceBox fx:id="departmentChoice" prefWidth="180"/>
                            </HBox>

                            <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
                                <Tab text="All">
                                    <AnchorPane>
                                        <TableView fx:id="employeeTable" prefHeight="420" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                                                   AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                                            <columns>
                                                <TableColumn fx:id="colEmployee" text="Employee" prefWidth="200"/>
                                                <TableColumn fx:id="colDepartment" text="Department" prefWidth="120"/>
                                                <TableColumn fx:id="colStatus" text="Status" prefWidth="100"/>
                                                <TableColumn fx:id="colCheckIn" text="Check In" prefWidth="90"/>
                                                <TableColumn fx:id="colCheckOut" text="Check Out" prefWidth="90"/>
                                                <TableColumn fx:id="colLocation" text="Location" prefWidth="180"/>
                                            </columns>
                                        </TableView>
                                    </AnchorPane>
                                </Tab>

                                <Tab text="Checked In">
                                    <AnchorPane>
                                        <TableView fx:id="tableCheckedIn" prefHeight="420" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                                                   AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                                            <columns>
                                                <TableColumn text="Employee" prefWidth="200" fx:id="c1"/>
                                                <TableColumn text="Department" prefWidth="120" fx:id="c2"/>
                                                <TableColumn text="Check In" prefWidth="120" fx:id="c3"/>
                                                <TableColumn text="Location" prefWidth="200" fx:id="c4"/>
                                            </columns>
                                        </TableView>
                                    </AnchorPane>
                                </Tab>

                                <Tab text="Checked Out">
                                    <AnchorPane>
                                        <TableView fx:id="tableCheckedOut" prefHeight="420" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                                                   AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                                            <columns>
                                                <TableColumn text="Employee" prefWidth="200" fx:id="d1"/>
                                                <TableColumn text="Department" prefWidth="120" fx:id="d2"/>
                                                <TableColumn text="Check In" prefWidth="120" fx:id="d3"/>
                                                <TableColumn text="Check Out" prefWidth="120" fx:id="d4"/>
                                            </columns>
                                        </TableView>
                                    </AnchorPane>
                                </Tab>
                            </TabPane>

                        </VBox>
                    </TitledPane>

                    <!-- Top performers -->
                    <TitledPane text="Top 10 Performers - Highest Overtime This Month" expanded="true">
                        <TableView fx:id="topTable" prefHeight="220">
                            <columns>
                                <TableColumn text="Rank" prefWidth="60" fx:id="rankCol"/>
                                <TableColumn text="Employee" prefWidth="220" fx:id="tpEmployee"/>
                                <TableColumn text="Department" prefWidth="120" fx:id="tpDept"/>
                                <TableColumn text="Overtime Hours" prefWidth="120" fx:id="tpHours"/>
                                <TableColumn text="Bonus Amount" prefWidth="120" fx:id="tpBonus"/>
                                <TableColumn text="Status" prefWidth="100" fx:id="tpStatus"/>
                            </columns>
                        </TableView>
                    </TitledPane>
                </VBox>

                <!-- Right column: recent activity -->
                <VBox prefWidth="320" spacing="8">
                    <TitledPane text="Recent Activity" expanded="true">
                        <VBox spacing="8" padding="8">
                            <ListView fx:id="recentList" prefHeight="300"/>
                        </VBox>
                    </TitledPane>
                </VBox>
            </HBox>
        </VBox>
    </center>
</BorderPane>
